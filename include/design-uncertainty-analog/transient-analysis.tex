In this section, we develop a probabilistic technique for transient power and
temperature analysis based on the one presented in
\sref{transient-state-solution} using the machinery described in
\sref{chaos-uncertainty-analysis}. Our goal is to obtain such a solution that is
capable of undertaking the analysis is the same step-by-step manner as the one
inherent to the deterministic solution described in
\sref{transient-state-solution}. In this way, the workload can be continuously
analyzed as long as it is needed.

\subsection{Problem Formulation}

As stated in \sref{chaos-uncertainty-analysis}, the designer is supposed to
decide on the system model producing the quantity of interest. Assuming the
general system and temperature models given in \sref{system-model} and
\sref{temperature-model}, respectively, the only component that is left to
define is the power model since it is the one introducing the actual workload
into the system. Denote the prescribed power model by
\begin{equation} \elab{chaos-power-model}
  \vp = \f(i, \vq, \vu)
\end{equation}
where $\f: \natural[+] \times \real^\np \times \real^\nu \to \real^\np$ is a
function that evaluates the power consumption $\vp \in \real^\np$ of the
processing elements at step $i$ given the heat dissipation $\vq \in \real^\np$
of the processing elements and the parameters $\vu \in \real^\nu$.

\begin{remark}
It should be understood that \vp, \vq, and \vu are random vectors in general,
and that \f consumes $\vq(\omega)$ and $\vu(\omega)$ and yields $\vp(\omega)$
for some particular outcome $\omega \in \Omega$. The function itself is purely
deterministic.
\end{remark}

The designer can choose any \f. It can be, for instance, a closed-form formula
or a piece of code. The only assumption we make about \f is that it is smooth in
\vz and belongs to $\L{2}(\Omega, \F, \probability)$ when it is viewed as a
random variable (see \sref{probability-theory}), which is generally applicable
to most physical systems \cite{xiu2010}. Note also that the operation performed
by this ``black box'' is purely deterministic. The definition of \f is flexible
enough to account for such effects as the interdependence between power and
temperature discussed in \sref{power-model}.

The solution to transient analysis is based on the one presented in
\sref{transient-state-solution}. The major difference is that
\eref{temperature-model} implicitly operates on stochastic quantities in the
context of this chapter. Consequently, the recurrent solution in
\eref{transient-state-recurrence}, that is,
\begin{equation} \elab{chaos-recurrence-original}
  \vs_i = \m{E} \vs_{i - 1} + \m{F} \vp_i
\end{equation}
for $i = \range{1}{\ns}$ where $\vs_0 = \v{0}$, is such as well. In the
deterministic case, it can be readily employed to perform transient power and
temperature analysis. In the stochastic case, however, the situation is
substantially different since $\vp_i$ and, hence, $\vs_i$ and $\vq_i$ are
probabilistic quantities. Moreover, at each step, $\vp_i$ is an arbitrary
transformation of the uncertain parameters \vu and stochastic temperature
$\vq_i$, which results in a multivariate random variable with a generally
unknown probability distribution. Furthermore, $\vp_i$, $\vq_i$, $\vs_i$, and
\vu are dependent random vectors since the first three are functions of the
last. Hence, the operations in \eref{chaos-recurrence-original} are to be
performed on dependent random vectors with arbitrary distributions, which, in
general, have no closed-form solutions.

In this section, the quantity of interest \g---which is the output of Stage~1 in
\fref{chaos-overview}---is roughly \f given in \eref{chaos-power-model};
however, in the end, the actual quantities of interest \mp and \mq will be
attained, which we discuss now.

\subsection{Surrogate Construction}

The goal now is to transform the recurrence in \eref{chaos-recurrence-original}
in such a way that the distributions of power and temperature can be estimated
efficiently. Based on the methodology presented in
\sref{chaos-uncertainty-analysis}, we construct a \ac{PC} surrogate for \f so
that it can be then propagated through \eref{chaos-recurrence-original} in order
to obtain an expansion for (temperature-aware) power and an expansion for
temperature.

The expansion of $\vp_i$ in \eref{chaos-recurrence-original} computed via \f in
\eref{chaos-power-model} is
\[
  \chaos{\nz}{\lc}{\vp_i} = \sum_{\vj \in \sparseindex{\nz}{\lc}} \hat{\vp}_{i \vj} \psi_{\vj}
\]
where $\{ \psi_{\vj}: \real^\nz \to \real \}$ are the basis polynomials; $\{
\hat{\vp}_{i \vj} \} \subset \real^\np$ are the corresponding coefficients; and
the index set $\sparseindex{\nz}{\lc}$ is given by
\eref{index-total-order-anisotropic}. It can be seen in
\eref{chaos-recurrence-original} that, due to the linearity of the operations
involved in the recurrence, $\vs_i$ attains a \ac{PC} expansion that has the
same structure as the one of $\vp_i$, and the recurrence can be rewritten as
follows:
\[
  \chaos{\nz}{\lc}{\vs_i} = \m{E} \, \chaos{\nz}{\lc}{\vs_{i - 1}} + \m{F} \, \chaos{\nz}{\lc}{\vp_i}
\]
for $i = \range{1}{\ns}$. Consequently, there are two concurrent \ac{PC}
expansions: one is for power, and one is for temperature; the two expansions
have the same polynomial basis but different coefficients. In order to
understand the structure of the above formula better, let us spell it out as
\[
  \sum_{\vj \in \sparseindex{\nz}{\lc}} \hat{\vs}_{i \vj} \psi_{\vj} =
  \sum_{\vj \in \sparseindex{\nz}{\lc}} \left(\m{E} \, \hat{\vs}_{i - 1, \vj} + \m{F} \, \hat{\vp}_{i \vj}\right) \psi_{\vj}.
\]
Multiplying the above equation by each polynomial from the basis and making use
of the orthogonality property in \eref{chaos-orthogonality}, we obtain the
following recurrence:
\begin{equation} \elab{chaos-recurrence}
  \hat{\vs}_{i \vj} = \m{E} \hat{\vs}_{i - 1, \vj} + \m{F} \hat{\vp}_{i \vj}
\end{equation}
for $i = \range{1}{\ns}$ and $\vj \in \sparseindex{\nz}{\lc}$. Combining the
recurrence with \eref{temperature-algebraic}, we obtain the coefficients of the
\ac{PC} expansion of the temperature vector $\vq_i$. Lastly, the coefficients
$\{ \hat{\vp}_{i \vj} \}$ are found using a quadrature rule
$\quadrature{\nz}{\lq}$ as follows:
\[
  \hat{\vp}_{i \vj} = \quadrature{\nz}{\lq}{\vp_i \psi_{\vj}}
\]
for $i = \range{1}{\ns}$ and $\vj \in \sparseindex{\nz}{\lc}$ where the
operation should be understood element-wise, and it can be efficiently
undertaken by virtue of a projection matrix in \eref{chaos-projection-matrix}.
It is worth noting that, since power depends on temperature as discussed in
\sref{power-model}, at each step of the recurrence in \eref{chaos-recurrence},
the computation of $\hat{\vp}_{i \vj}$ via \f should be done with respect to the
expansion of $\vq_{i - 1}$.

The construction process of the stochastic power and temperature profiles is
estimated to have the following time complexity per time step:
\[
  \bigo{n_n^2 \nc + \nn \np \nq \nc + \nq \f(\np)}
\]
where \nn, \np, \nc, and \nq are the number of thermal nodes, processing
elements, polynomial terms, and quadrature points, respectively, and $\f(\np)$
denotes the contribution of the power model in \eref{chaos-power-model}. The
expression can be detailed further by expanding \nc and \nq. Assuming the
isotropic total-order index set given in \eref{index-total-order-isotropic}, \nc
is shown in \eref{index-total-order-isotropic-length}, which behaves as $\nz^\lc
/ \lc!$ in the limit with respect to \nz. For quadratures based on the full
tensor product in \eref{quadrature-tensor}, $\log(\nq) \propto \nz$, which means
that the dependency of \nq on \nz is exponential. It can be seen that the theory
of \ac{PC} expansions suffers from the curse of dimensionality \cite{eldred2008,
xiu2010}: when \nz increases, the number of polynomial terms as well as the
complexity of the corresponding coefficients exhibit a growth, which is
exponential without special treatments. The problem does not have a general
solution and is one of the central topics of many ongoing studies.

We mitigate the curse of dimensionality by \one~keeping the number of stochastic
dimensions low via the model-order-reduction technique discussed in
\sref{probability-transformation}---which is based on the \ac{KL} decomposition
and is a part of $\transform$ in \eref{chaos-transformation}---and
\two~utilizing efficient construction techniques discussed in
\sref{sparse-integration} as well as in \sref{chaos-surrogate-construction}. In
the case of, for instance, isotropic integration grids based on the Smolyak
algorithm and Gaussian quadrature rules, $\log(\nq) \propto \log(\nz)$, which
means that the dependency of \nq on \nz is only polynomial \cite{heiss2008}.
Anisotropic constructions allow for further reduction.

Let us summarize this subsection. Recall the stochastic recurrence in
\eref{chaos-recurrence-original} where, in the presence of dependencies, an
arbitrary functional $\vp_k$ of the uncertain parameters \vu and stochastic
temperature $\vq_k$---which can be seen in \eref{chaos-power-model}---needs to
be evaluated and combined with another random vector $\vs_k$. This recurrence in
\eref{chaos-recurrence-original} has been replaced with a purely deterministic
recurrence in \eref{chaos-recurrence}. More globally, the whole system including
the heavy temperature model in \eref{temperature-model-original} has been
substituted with a light surrogate defined by a set of polynomials $\{
\psi_{\vj} \}$ in \vz, a set of coefficients $\{ \hat{\vp}_{i \vj} \}$ for
power, and a set of coefficient $\{ \hat{\vq}_{i \vj} \}$ for temperature. These
quantities constitute a stochastic power profile \mp and a stochastic
temperature profile \mq, and these profiles are ready to be analyzed at each
step of the process as discussed in \sref{chaos-post-processing}.

Before we proceed, let us draw attention to the ease and generality of taking
uncertainty into consideration using the proposed approach. The above
description is delivered from any explicit formula of any particular uncertain
parameter. In contrast, the solutions from the literature related to process
variation are typically based on ad~hoc expressions and should be tailored by
the designer for each new parameter individually; see, for instance,
\cite{ghanta2006, bhardwaj2008, huang2009a}. Our framework provides a great
flexibility in this regard.
